# ADR-003: Authentication Strategy (JWT)

## Status

Accepted

## Context

本プロジェクトでは、フロントエンドとバックエンドを分離して開発する予定です。
そのため、セッションステートをサーバー側で管理する従来の Cookie + Session 方式よりも、フロントとバックエンド間でトークンをやり取りする **JWT (JSON Web Token) 認証** が適していると判断しました。

また、個人開発かつ学習目的も兼ねており、モダンな SPA + API 構成の認証フローを経験することが価値となります。

## Decision

- バックエンドで JWT を発行・検証する方式を採用
- フロントエンドはログイン後、JWT を `Authorization` ヘッダに添付して API にアクセス
- アクセストークンの有効期限は短め（例: 15分）、必要に応じてリフレッシュトークンを利用
- パスワードは bcrypt などでハッシュ化して保存
- OAuth や外部SSOは発展機能として将来追加可能

## Alternatives Considered

### Session + Cookie

- メリット
  - 実装が比較的簡単
  - Cookie のセキュリティ設定も明確
- デメリット
  - フロントとバックエンドを分離すると管理が少し煩雑
  - ステートレス構成を学習できない
- 採用しない理由: 今回は SPA + API を主体とするため

### OAuth / OpenID Connect

- メリット
  - 外部ログイン対応容易
  - 実務でよく使われる
- デメリット
  - 実装が複雑
  - 学習コストが高い
- 採用しない理由: 現状は自前認証を学ぶことを優先

## Consequences

### Positive

- モダンSPA構成の認証フローが学習できる
- バックエンドはステートレス構成となり拡張性が高い
- JWT による認証は今後の他プロジェクトでも応用可能

### Negative

- 実装やセキュリティ設定にやや学習コストがかかる
- リフレッシュトークンや期限管理などの実装が必要
